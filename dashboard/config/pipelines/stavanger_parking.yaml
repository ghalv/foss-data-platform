# Pipeline configuration for Stavanger Parking
id: stavanger_parking
name: Stavanger Parking
type: dbt
owner: platform
schedule: "*/5 * * * *"  # optional

dbt:
  project_dir: pipelines/stavanger_parking/dbt
  target: dev

source:
  kind: ckan
  ckan:
    base: https://opencom.no
    dataset_id: stavanger-parkering
    preferred_format: json

ingestion:
  seed_path: pipelines/stavanger_parking/dbt/seeds/live_parking.csv
  columns:
    - name
    - available_spaces
    - lat
    - lon
    - fetched_at

description: "Stavanger parking data pipeline with delta load and Iceberg MERGE operations"

features:
  - delta_load: true
  - incremental_processing: true
  - iceberg_merge: true
  - data_quality_validation: true
  - partitioning: "date"

labels:
  - parking
  - stavanger
  - delta_load
  - iceberg
  - incremental
